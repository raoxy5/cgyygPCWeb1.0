<!--非首页横向菜单-->
<div class="container">
    <div class="row">
        <div class="menu">
            <div class="all-sort">
                <h2>商品分类</h2>
                <!--经过展开菜单-->
                <div style="margin:0 auto"><!--原来是width:1200px; 现在不需要经过展开子菜单，就隐藏了-->
                    <div class="all-sort-list" id="menu-list" style="display: none">
                        <div class="item bo">
                            <h3>
                                <a href="#" class="">
                                    <!--<span class="glyphicon glyphicon-fire"></span>-->
                                    热门推荐
                                </a>

                            </h3>
                            <!--<div class="item-list clearfix" style="top: 0px; display: none;">
                                <div class="subitem">
                                    <dl class="fore1">
                                            <dt><a href="#">子菜单1</a></dt>
                                            <dd> </dd>
                                        </dl>
                                        <dl class="fore1">
                                            <dt><a href="#">子菜单2</a></dt>
                                            <dd> </dd>
                                        </dl>
                                  </div>
                                <div class="cat-right">
                                    <dl class="categorys-promotions" clstag="homepage|keycount|home2013|0601c">
                                        <dd>
                                            <ul>
                                                <li><a href="" target="_blank" class="current"><img src="images/168x134_5650355047c39.jpg" width="194" height="70" title=""></a></li>
                                            </ul>
                                        </dd>
                                    </dl>

                                </div>
                            </div>-->
                        </div>

                    </div>
                </div>
                <!--经过展开菜单-->
            </div>

            <div class="nav">
                <ul class="clearfix padding-l-15">
                    <li><a href="index.html" class="current">首页</a></li>

                    <li><a href="soon-category.html">即将揭晓</a></li>
                    <li><a href="http://quanzi.cgyyg.com" target="_blank">橙果社区</a></li>
                    <li><a href="guide_video.html" target="_blank">新手指南</a></li>

                </ul>
            </div>
        </div>
    </div>
</div>
<!--<script src="js/loadTop.js"></script>--><!--加载头部-->
<script src="js/data/menu.js"></script>
<script src="js/stickUp.min.js"></script>
<script>
    //网页往下滚动，菜单顶部固定
    jQuery(function($) {
        $(document).ready(function () {
            //enabling stickUp on the '.navbar-wrapper' class
            $('.menu').stickUp();

        });
    });
        /*菜单*/

    $('.all-sort').hover(function () {
                $('.all-sort-list').queue(function (next) {
                    $(this).css({
                        'display': 'block',
                    });
                    $('.all-sort-list > .item').css({
                        'display': 'block',
                    });
                    next();
                }).animate({}, 1000,
                        function () {

                            $('.all-sort-list > .item').hover(function () {
                                var eq = $('.all-sort-list > .item').index(this), //获取当前滑过是第几个元素
                                        h = $('.all-sort-list').offset().top, //获取当前下拉菜单距离窗口多少像素
                                        s = $(window).scrollTop(), //获取游览器滚动了多少高度
                                        i = $(this).offset().top, //当前元素滑过距离窗口多少像素
                                        item = $(this).children('.item-list').height(), //下拉菜单子类内容容器的高度
                                        sort = $('.all-sort-list').height();						//父类分类列表容器的高度
                                if (item < sort) {
                                    if (eq == 0) {
                                        $(this).children('.item-list').css('top', (i - h));
                                    } else {
                                        $(this).children('.item-list').css('top', (i - h) + 1);
                                    }
                                } else {
                                    if (s > h) {
                                        if (i - s > 0) {
                                            $(this).children('.item-list').css('top', (s - h) + 2);
                                        } else {
                                            $(this).children('.item-list').css('top', (s - h) - (-(i - s)) + 2);
                                        }
                                    } else {
                                        $(this).children('.item-list').css('top', 0);
                                    }
                                }
                                $(this).addClass('hover');
                                $(this).children('.item-list').css('display', 'block');
                                $(this).css('display', 'block');
                            }, function () {
                                $(this).removeClass('hover');
                                $(this).children('.item-list').css('display', 'none');
                                //$(this).css('display', 'none');
                            });
                        });

            },
            function () {
                $(this).queue(function (next) {
                    bBtn = false;
                    $('.all-sort-list').css('display', 'none');
                    next();
                });
            });


</script>
